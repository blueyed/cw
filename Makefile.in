# this was NOT generated by automake.
prefix=@prefix@
BINDIR=${prefix}/bin
LIBDIR=${prefix}/lib
datarootdir = @datarootdir@
MANDIR=@mandir@
SHELL=@SHELL@
CC=@CC@
ECHO=echo
LN=ln
RM=rm
MKDIR_P=mkdir -p
INSTALL=@INSTALL@

all: cw cwu

cw:
	@$(ECHO) "* Compiling cw (color wrapper)..."
	@$(CC) src/cw.c -o bin/cw @CFLAGS@ @LIBS@ @DEFS@

cwu:
	@$(ECHO) "* Compiling cwu (color wrapper directive updater)..."
	@$(CC) src/cwu.c -o bin/cwu @CFLAGS@

clean:
	@$(ECHO) "* Cleaning generated content..."
	@$(RM) -rf Makefile config.status config.cache config.log config.h\
        bin/cw$(EXEEXT) bin/cwu$(EXEEXT)

install: cw cwu
	@$(ECHO) "* Installing color wrapper..."
	@for FILE in bin/*;do $(INSTALL) $$FILE $(BINDIR);done
	@$(LN) -sf $(BINDIR)/cw$(EXEEXT) $(BINDIR)/cwe$(EXEEXT)
	@$(ECHO) "* Installing color wrapper generic definition files..."
	@$(MKDIR_P) $(LIBDIR)/cw/
	@for FILE in def/*;do $(INSTALL) $$FILE $(LIBDIR)/cw/;done
	@$(ECHO) "* Installing color wrapper generic header/footer files..."
	@$(MKDIR_P) $(LIBDIR)/cw/etc
	@for FILE in etc/*;do $(INSTALL) -m 644 $$FILE $(LIBDIR)/cw/etc;done
	@$(ECHO) "* Installing manual pages..."
	@for FILE in man/*;do $(INSTALL) -m 644 $$FILE $(MANDIR)/man1/;done
	@$(ECHO) "* Updating definition files..."
	@$(BINDIR)/cwu $(LIBDIR)/cw $(BINDIR)/cw
	@$(ECHO) "-----------------------------------------------------------"
	@$(ECHO) "* Finished; definitions are stored in: $(LIBDIR)/cw"
	@$(ECHO) "* For bash: place 'export PATH=\"$(LIBDIR)/cw:\$$PATH\"'"\
        "at the end of ~/.bash_profile (or /etc/profile globally)"
	@$(ECHO) "* For tcsh: place 'setenv PATH \"$(LIBDIR)/cw:\$$PATH\"'"\
        "at the end of ~/.login (or /etc/csh.login globally)"
	@$(ECHO) "* Or to automate the two lines above use the"\
        "\"colorcfg\" command. (and add optional anti-coloring precautions)"
	@$(ECHO) "* Once the desired shell(s) are set up, use the"\
        "\"color\" command, or the environment variable NOCOLOR=1 to turn"\
        "color wrapping on and off."
	@$(ECHO) ""
	@$(ECHO) "* PLEASE view the README file for more information if"\
        "you haven't already."

uninstall:
	@$(ECHO) "* Uninstalling..."
	@$(RM) -rf $(BINDIR)/cw$(EXEEXT) $(BINDIR)/cwu$(EXEEXT) $(BINDIR)/cwe$(EXEEXT)\
        $(BINDIR)/color $(BINDIR)/colorcfg\
        $(LIBDIR)/cw $(MANDIR)/man1/cw.1 $(MANDIR)/man1/cwu.1\
        $(MANDIR)/man1/cwe.1
